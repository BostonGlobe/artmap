<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Boston Art</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />

		<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery.ui.map.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery.ui.map.extensions.js"></script>
		<script type="text/javascript">
			$(function() {
				// $('#map_canvas').gmap();
				$('#map_canvas').gmap().bind('init', function(evt, map) {
					$('#map_canvas').gmap('getCurrentPosition', function(position, status) {
						if ( status === 'OK' ) {
							var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
							$('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': true});
							$('#map_canvas').gmap('addShape', 'Circle', { 
								'strokeWeight': 0, 
								'fillColor': "#008595", 
								'fillOpacity': 0.25, 
								'center': clientPosition, 
								'radius': 15, 
								'clickable': false 
							});
						}
					});

					$.getJSON( 'maps.json', function(data) { 
						$.each( data.markers, function(i, marker) {
							$('#map_canvas').gmap('addMarker', { 
								'position': new google.maps.LatLng(marker.latitude, marker.longitude), 
								'bounds': false 
							}).click(function() {
								$('#map_canvas').gmap('openInfoWindow', { 'content': marker.content }, this);
							});
						});
					});

				});

			});
		</script>
	</head>
	<body>
		<div data-role="page" data-theme="a" data-add-back-btn="true">
			<div data-role="header">
				<h1>Boston Art</h1>
			</div>
			<div data-role="content">
				<div id="map_canvas" style="width:100%;height:250px"></div>
			</div>
			<div data-role="footer">
				<p>Footer</p>
			</div>
		</div>
	</body>
</html>